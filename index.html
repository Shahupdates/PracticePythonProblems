<!DOCTYPE html>
<html>
<head>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css" rel="stylesheet" />
  <title>Python Problems</title>
  <style>
    /* Add CSS styling here to customize the appearance of the table and popup */
  </style>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-python.min.js"></script>
  <table id="problemTable">
    <thead>
      <tr>
        <th>Problem</th>
        <th>Solution</th>
        <th>Problem</th>
        <th>Solution</th>
        <th>Problem</th>
        <th>Solution</th>
        <th>Problem</th>
        <th>Solution</th>
      </tr>
    </thead>
    <tbody>
      <!-- Generate the table dynamically using JavaScript -->
    </tbody>
  </table>

  <div id="popupContainer" style="display: none;">
    <div id="popupContent">
      <button id="closeButton">X</button>
      <pre id="pythonCode"><code class="language-python"></code></pre>
    </div>
  </div>

  <script>
    // Array of problem files
    const problems = [];

    // Filling the problems array with the problem details
    const difficulties = ["easy", "medium", "hard", "extreme"];
    for (let i = 0; i < difficulties.length; i++) {
      for (let j = 1; j <= 20; j++) {
        problems.push({ difficulty: difficulties[i], number: j });
      }
    }

    // Function to handle displaying the popup with the problem code
    function showPopup(difficulty, number) {
      const popupContainer = document.getElementById("popupContainer");
      const pythonCode = document.getElementById("pythonCode");

      // Set the code in the <pre> element to the content of the file
      pythonCode.textContent = ""; // Clear the previous code
      fetch(`/${difficulty}/problem${number}.py`)
        .then((response) => response.text())
        .then((code) => {
          // Use Prism to highlight the code
          pythonCode.innerHTML = `<code class="language-python">${Prism.highlight(code, Prism.languages.python, 'python')}</code>`;
        });

      // Show the popup
      popupContainer.style.display = "block";
    }

    // Function to close the popup
    function closePopup() {
      const popupContainer = document.getElementById("popupContainer");
      popupContainer.style.display = "none";
    }

    // Function to generate the table dynamically
    function generateTable() {
      const tableBody = document.querySelector("#problemTable tbody");

      for (let i = 0; i < problems.length; i++) {
        const problem = problems[i];
        if (i % 20 === 0) {
          // Create a new row every 20 problems
          var newRow = document.createElement("tr");
          tableBody.appendChild(newRow);
        }

        // Create a new cell for each problem
        var newCell = document.createElement("td");
        newCell.textContent = `Problem ${i + 1}`;

        // Add an event listener to show the popup on cell click
        newCell.addEventListener("click", function () {
          showPopup(problem.difficulty, problem.number);
        });

        newRow.appendChild(newCell);
      }
    }

    // Add event listener to the close button
    document.getElementById("closeButton").addEventListener("click", closePopup);

    // Generate the table when the page loads
    window.addEventListener("DOMContentLoaded", generateTable);
  </script>
</body>
</html>
